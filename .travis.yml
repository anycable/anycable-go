sudo: false
language: go

notifications:
  email:
    on_success: change
    on_failure: always

go:
  - 1.11.x
  - 1.12.x
  - 1.13.x
  - 1.14.x
  - master

env:
  global:
    - GO111MODULE=on
    - GOFLAGS=-mod=vendor
    - BUNDLE_GEMFILE=.circleci/Gemfile

matrix:
  allow_failures:
    - go: master
  fast_finish: true

services:
  - redis-server
before_install:
  - rvm use 2.5 --install --binary --fuzzy
  - bundle install
script: make test-ci
